<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sanskrit & Bhagavad Gita Assistant</title>

<style>
/* ================= GLOBAL ================= */
body {
    font-family: "Segoe UI", Arial, sans-serif;
    margin: 0;
    background: #f5f7fa;
}

/* ================= HEADER ================= */
header {
    background: #ffffff;
    padding: 15px 30px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 3px solid #6a1b9a;
}

header img {
    height: 60px;
}

.header-title {
    text-align: center;
}

.header-title h1 {
    margin: 0;
    font-size: 26px;
    color: #4a148c;
}

.header-title p {
    margin: 4px 0 0;
    font-size: 14px;
    color: #555;
}

.center-heading {
    text-align: center;
}

/* ================= PAGE WIDTH ================= */
.page-wrapper {
    max-width: 1100px;
    margin: 0 auto;
    padding: 30px 20px;
}

/* ================= HERO IMAGE ================= */
.hero {
    width: 100%;
    max-height: 33vh;
    overflow: hidden;
    border-radius: 14px;
    margin-bottom: 20px;
}

.hero img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* ================= SECTION COMMON ================= */
.section {
    border-radius: 14px;
    padding: 24px;
    margin-bottom: 20px;
}

/* ================= SANSKRIT SECTION ================= */
.sanskrit-outer {
    background: #efe3f8;
    border: 1px solid #d3b7ea;
}

.sanskrit-inner {
    background: #fffaf0;
    border-radius: 12px;
    padding: 22px;
    border: 1px solid #e6d6b8;
}

.sanskrit-header {
    text-align: center;
    margin-bottom: 20px;
}

.sanskrit-header h2 {
    margin: 0;
    color: #4a148c;
    font-weight: 600;
}

.sanskrit-header span {
    font-size: 16px;
    color: #6a1b9a;
}

/* ================= GITA SECTION ================= */
.gita-outer {
    background: #fff6dd;
    border: 1px solid #f0d6a6;
}

.gita-inner {
    background: #fffaf0;
    border-radius: 12px;
    padding: 22px;
}

.gita-title {
    font-weight: 600;
    color: #e65100;
    margin-bottom: 4px;
}

.gita-box {
    background: #ffffff;
    border-left: 5px solid #ff6f00;
    padding: 8px 10px;
    margin-bottom: 12px;
    font-size: 14px;
    min-height: 34px;
    white-space: pre-line;
}

/* ===== GITA CONTROL ROW ===== */
.gita-controls {
    display: flex;
    align-items: center;
    gap: 20px;          /* space between text, speaker, button */
    margin-top: 12px;
}

.gita-label {
    font-size: 18px;
    font-weight: 600;
    color: #6a1b9a;
}

.gita-controls .icon-btn {
    font-size: 22px;
    cursor: pointer;
}

.gita-label-btn {
    background: none;
    border: none;
    font-size: 18px;
    font-weight: 600;
    color: #6a1b9a;
    cursor: pointer;
    padding: 0;
}

.gita-label-btn:hover {
    text-decoration: underline;
}



#gita-controls .icon-btn {
    cursor: pointer;
}


/* ================= FORM LAYOUT ================= */
.row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 22px;
    margin-bottom: 12px;
}

.label {
    font-weight: 600;
    margin-bottom: 4px;
    color: #4527a0;
}

/* ================= INPUTS ================= */
select {
    width: 100%;
    height: 36px;
    font-size: 14px;
    padding: 4px 8px;
    border-radius: 6px;
    border: 1px solid #ccc;
}

textarea {
    width: 100%;
    height: 32px;
    font-size: 14px;
    padding: 6px 8px;
    border-radius: 6px;
    border: 1px solid #ccc;
    resize: none;
}

#sa_q, #sa_ans {
    background: #f5efff;
    color: #311b92;
    font-weight: 500;
}

/* ================= SPEECH BUTTON ================= */
.icon-btn {
    font-size: 22px;
    background: none;
    border: none;
    cursor: pointer;
    color: #5e35b1;
}

/* ================= FOOTER ================= */
.footer-quote {
    text-align: center;
    color: #4a148c;
    font-size: 18px;
    font-weight: 500;
    margin: 20px 0;
}

.footer-quote span {
    display: block;
    font-size: 14px;
    color: #555;
}

footer {
    background: #4a148c;
    color: #fff;
    text-align: center;
    padding: 12px;
    font-size: 14px;
}

/* ================= MOBILE ================= */
@media (max-width: 768px) {
    header {
        flex-direction: column;
        gap: 10px;
        text-align: center;
    }

    .row {
        grid-template-columns: 1fr;
    }

    .page-wrapper {
        padding: 20px 12px;
    }

    .gita-controls {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }

    .gita-controls {
        flex-wrap: wrap;
        gap: 12px;
    }

    .gita-actions {
        justify-content: flex-start;
    }
}
</style>
</head>

<body>

<!-- ================= HEADER ================= -->
<header>
    <img src="{{ url_for('static', filename='dtc_logo.png') }}">
    <div class="header-title">
        <h1>Delhi Technical Campus</h1>
        <p>Sanskrit Intelligence & Indic Knowledge Platform</p>
    </div>
    <div>
        <img src="{{ url_for('static', filename='nba_logo.png') }}">
        <img src="{{ url_for('static', filename='aicte_logo.png') }}">  
    </div>
</header>

<main class="page-wrapper">

<!-- ================= HERO ================= -->
<div class="hero">
    <img src="{{ url_for('static', filename='guru.png') }}" alt="Sanskrit Knowledge">
</div>

<!-- ================= SANSKRIT CHATBOT ================= -->
<div class="section sanskrit-outer">

<div class="sanskrit-header">
    <h2>üïâÔ∏è ‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§¨‡•ã‡§ß‡§É <span>(Sa·πÅskrÃ•ta-Bodha·∏•)</span></h2>
    <h3 class="center-heading">Sanskrit Voice Chatbot</h3>
</div>

<div class="sanskrit-inner">

<div class="label">Select Sample Question</div>
<select id="sample_q" onchange="selectQuestion()">
    <option value="">‚Äî Select Sample Question ‚Äî</option>
    <option value="‡§®‡§Æ‡§∏‡•ç‡§§‡•á">‡§®‡§Æ‡§∏‡•ç‡§§‡•á</option>
    <option value="‡§§‡•ç‡§µ‡§Ç ‡§ï‡§É ‡§Ö‡§∏‡§ø">‡§§‡•ç‡§µ‡§Ç ‡§ï‡§É ‡§Ö‡§∏‡§ø</option>
    <option value="‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§Æ‡•ç ‡§ï‡§ø‡§Æ‡•ç">‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§Æ‡•ç ‡§ï‡§ø‡§Æ‡•ç</option>
    <option value="‡§≠‡§æ‡§∞‡§§‡§∏‡•ç‡§Ø ‡§∞‡§æ‡§ú‡§ß‡§æ‡§®‡•Ä ‡§ï‡§æ">‡§≠‡§æ‡§∞‡§§‡§∏‡•ç‡§Ø ‡§∞‡§æ‡§ú‡§ß‡§æ‡§®‡•Ä ‡§ï‡§æ</option>
    
</select>

<br><br>

<div class="row">
    <div>
        <div class="label">Sanskrit Text</div>
        <textarea id="sa_q"></textarea>
    </div>
    <div>
        <div class="label">Sanskrit Output</div>
        <textarea id="sa_ans"></textarea>
    </div>
</div>

<div class="row">
    <div>
        <div class="label">English Text</div>
        <textarea id="en_q"></textarea>
    </div>
    <div>
        <div class="label">English Output</div>
        <textarea id="en_ans"></textarea>
    </div>
</div>

<div class="row">
    <div>
        <div class="label">Speech Input</div>
        <button class="icon-btn" onclick="listen()">üîä</button>
    </div>
    <div>
        <div class="label">Speech Output</div>
        <button class="icon-btn" onclick="speakSanskritAndEnglish()">üîä</button>

    </div>
</div>

</div>
</div>

<!-- ================= GITA ================= -->
<div class="section gita-outer">
<h2 class="center-heading">üìú Bhagavad Gita ‚Äì Knowledge Assistant</h2>

<div class="gita-inner">

<div class="gita-title">Question</div>
<div id="gita_question" class="gita-box"></div>

<div class="gita-title">Answer</div>
<div id="gita_answer" class="gita-box"></div>

<select id="gita_q" onchange="askGita()">
    <option value="">‚Äî Select Sample Question ‚Äî</option>
    <option value="chapters">How many chapters are in Bhagavad Gita?</option>
    <option value="verses">How many verses are in Bhagavad Gita?</option>
    <option value="krishna">Who narrated the Bhagavad Gita?</option>
    <option value="arjuna">To whom was Bhagavad Gita spoken?</option>
    <option value="message">What is the central message of Bhagavad Gita?</option>
</select>


<div class="gita-controls">
    <button class="gita-label-btn" onclick="showShloka()">
        üìú ‡§≠‡§ó‡§µ‡§¶‡•ç‡§ó‡•Ä‡§§‡§æ ‡§∏‡•á ‡§∂‡•ç‡§≤‡•ã‡§ï
    </button>

    <button class="icon-btn" onclick="speakGita()" title="Listen">
        üîä
    </button>

    <button id="moreBtn" onclick="anotherShloka()">
        Another Shloka
    </button>
</div>


</div>
</div>

</main>

<div class="footer-quote">
    ‡§∏‡§Ç‡§µ‡§æ‡§¶‡•á‡§® ‡§ú‡•ç‡§û‡§æ‡§®‡§Ç ‡§µ‡§∞‡•ç‡§ß‡§§‡•á
    <span>Knowledge grows through dialogue</span>
</div>

<footer>
¬© Delhi Technical Campus | Department of Computer Science & Engineering
</footer>

<script>
/* ===== Sanskrit Chatbot ===== */
let lastEnglishAnswer = "";

let recognition;

function listen() {
    if (recognition) recognition.abort();

    recognition = new webkitSpeechRecognition();
    recognition.lang = "hi-IN";
    recognition.start();

    recognition.onresult = e => {
        send(e.results[0][0].transcript);
    };
}


function selectQuestion() {
    if (sample_q.value) send(sample_q.value);
}

function send(text) {
    fetch("/process", {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({sanskrit:text})
    })
    .then(r=>r.json())
    .then(d=>{
        sa_q.value = d.sa_question;
        sa_ans.value = d.sa_answer;
        en_q.value = d.en_question;
        en_ans.value = d.en_answer;
        lastEnglishAnswer = d.en_answer;
    });
}

/* üîä Speak Sanskrit ‚Üí then English */
function speakSanskritAndEnglish() {
    speechSynthesis.cancel();

    const sa = new SpeechSynthesisUtterance(sa_ans.value);
    sa.lang = "hi-IN";
    sa.rate = 0.85;

    const en = new SpeechSynthesisUtterance(lastEnglishAnswer);
    en.lang = "en-IN";
    en.rate = 0.95;

    sa.onend = () => speechSynthesis.speak(en);
    speechSynthesis.speak(sa);
}

/* ===== Bhagavad Gita ===== */
const shlokas = [
 { sa:"‡§ï‡§∞‡•ç‡§Æ‡§£‡•ç‡§Ø‡•á‡§µ‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞‡§∏‡•ç‡§§‡•á ‡§Æ‡§æ ‡§´‡§≤‡•á‡§∑‡•Å ‡§ï‡§¶‡§æ‡§ö‡§®‡•§",
   en:"You have the right to perform your duty, but not to the fruits of action." },

 { sa:"‡§® ‡§ú‡§æ‡§Ø‡§§‡•á ‡§Æ‡•ç‡§∞‡§ø‡§Ø‡§§‡•á ‡§µ‡§æ ‡§ï‡§¶‡§æ‡§ö‡§ø‡§§‡•ç‡•§",
   en:"The soul is never born, nor does it ever die." },

 { sa:"‡§µ‡§æ‡§∏‡§æ‡§Ç‡§∏‡§ø ‡§ú‡•Ä‡§∞‡•ç‡§£‡§æ‡§®‡§ø ‡§Ø‡§•‡§æ ‡§µ‡§ø‡§π‡§æ‡§Ø‡•§",
   en:"As a person discards worn-out garments, the soul takes new bodies." }
];

let currentGitaText = "";

function askGita() {
    if (!gita_q.value) return;

    gita_question.innerText =
        gita_q.options[gita_q.selectedIndex].text;

    let ans = "";

    if (gita_q.value === "chapters")
        ans = "Bhagavad Gita has 18 chapters.";

    else if (gita_q.value === "verses")
        ans = "Bhagavad Gita has approximately 700 verses.";

    else if (gita_q.value === "krishna")
        ans = "Bhagavad Gita was narrated by Lord Krishna.";

    else if (gita_q.value === "arjuna")
        ans = "Bhagavad Gita was spoken to Arjuna.";

    else if (gita_q.value === "message")
        ans = "The Bhagavad Gita teaches duty, righteousness, and self-realization.";

    gita_answer.innerText = ans;
    currentGitaText = ans;

    document.getElementById("moreBtn").style.display = "none";
}


function showShloka() {
    const s = shlokas[Math.floor(Math.random() * shlokas.length)];

    gita_question.innerText = "‡§≠‡§ó‡§µ‡§¶‡•ç‡§ó‡•Ä‡§§‡§æ ‡§∏‡•á ‡§∂‡•ç‡§≤‡•ã‡§ï";
    currentGitaText = s.sa + "\nMeaning: " + s.en;
    gita_answer.innerText = currentGitaText;

    document.getElementById("moreBtn").style.display = "inline-block";
}


function speakText(text) {
    speechSynthesis.cancel();   // stops overlapping
    const u = new SpeechSynthesisUtterance(text);
    u.lang = "hi-IN";
    u.rate = 0.85;
    speechSynthesis.speak(u);
}


/* üé§ Speak only when button clicked */
function speakGita() {
    if (!currentGitaText) {
        alert("Please select a question or shloka first.");
        return;
    }

    speechSynthesis.cancel();

    let parts = currentGitaText.split("Meaning:");
    const saText = parts[0].trim();
    const enText = parts[1] ? parts[1].trim() : "";

    const sa = new SpeechSynthesisUtterance(saText);
    sa.lang = "hi-IN";
    sa.rate = 0.75;

    const en = new SpeechSynthesisUtterance(enText);
    en.lang = "en-IN";
    en.rate = 0.95;

    sa.onend = () => {
        if (enText) speechSynthesis.speak(en);
    };

    speechSynthesis.speak(sa);
}



/* üîÅ Another shloka */
function anotherShloka() {
    showRandomShloka();
}

function showRandomShloka() {
    const s = shlokas[Math.floor(Math.random() * shlokas.length)];
    currentGitaText = s.sa + "\nMeaning: " + s.en;
    gita_answer.innerText = currentGitaText;
    document.getElementById("moreBtn").style.display = "inline-block";
}
</script>



</body>
</html>
